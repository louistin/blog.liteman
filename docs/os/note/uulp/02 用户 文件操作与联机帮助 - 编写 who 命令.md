# 02. 用户, 文件操作与联机帮助: 编写 who 命令

## Unix 文件操作

* 文件操作函数

    ```c++
    open();
    creat();
    read();
    write();
    lseek();
    close();
    ```
    - 每次系统调用都会导致用户模式和内核模式的切换以及执行内核代码, 减少程序中系统调用次数可以
        提高程序运行效率


* 系统调用
    - 程序可以使用缓冲技术来减少系统调用次数, 仅当写缓冲区满或读缓冲区为空时才调用内核服务
    - Unix 内核可以通过内核缓冲区减少访问磁盘 IO 次数
    - 当系统调用出错时, 会将全局变量 `errno` 的值置为响应的错误码, 然后返回 -1
    - `perror(string)` 函数会自动查找错误代码, 在标准错误输出中显示相应的错误信息,
        `string` 为同时显示的描述性信息